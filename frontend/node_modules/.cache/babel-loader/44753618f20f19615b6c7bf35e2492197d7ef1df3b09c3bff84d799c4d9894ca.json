{"ast":null,"code":"export const uploadDocument = async (file, workspaceSlug) => {\n  const formData = new FormData();\n  formData.append('file', file); // 确保 'file' 是文件的字段名称\n\n  try {\n    const response = await fetch('http://localhost:3001/api/v1/document/upload', {\n      method: 'POST',\n      headers: {\n        'accept': 'application/json',\n        'Authorization': 'Bearer 48NJ9EF-30P4XKD-KR28HHZ-MRCAYMY'\n      },\n      body: formData\n    });\n    const result = await response.json();\n    console.log(result);\n    const location = result.documents[0].title + \"-\" + result.documents[0].id + \".json\";\n    try {\n      const response2 = await fetch('http://localhost:3001/api/v1/workspace/' + workspaceSlug + '/update-embeddings', {\n        method: 'POST',\n        headers: {\n          'accept': 'application/json',\n          'Authorization': 'Bearer 48NJ9EF-30P4XKD-KR28HHZ-MRCAYMY',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          \"adds\": [location]\n        })\n      });\n      const result2 = await response2.json();\n      console.log(result2);\n    } catch (error) {\n      console.error('Upload error:', error);\n    }\n  } catch (error) {\n    console.error('Upload error:', error);\n  }\n};","map":{"version":3,"names":["uploadDocument","file","workspaceSlug","formData","FormData","append","response","fetch","method","headers","body","result","json","console","log","location","documents","title","id","response2","JSON","stringify","result2","error"],"sources":["D:/AI_HR/frontend/src/api_document.js"],"sourcesContent":["export const uploadDocument = async (file, workspaceSlug) => {\r\n    const formData = new FormData();\r\n    formData.append('file', file); // 确保 'file' 是文件的字段名称\r\n\r\n    try {\r\n        const response = await fetch('http://localhost:3001/api/v1/document/upload', {\r\n            method: 'POST',\r\n            headers: {\r\n                'accept': 'application/json',\r\n                'Authorization': 'Bearer 48NJ9EF-30P4XKD-KR28HHZ-MRCAYMY'\r\n            },\r\n            body: formData\r\n        });\r\n\r\n        const result = await response.json();\r\n        console.log(result);\r\n\r\n        const location = result.documents[0].title + \"-\" + result.documents[0].id + \".json\";\r\n        try {\r\n            const response2 = await fetch('http://localhost:3001/api/v1/workspace/'+workspaceSlug+'/update-embeddings', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'accept': 'application/json',\r\n                    'Authorization': 'Bearer 48NJ9EF-30P4XKD-KR28HHZ-MRCAYMY',\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({\r\n                    \"adds\": [location]\r\n                })\r\n            })\r\n            const result2 = await response2.json();\r\n            console.log(result2);\r\n\r\n        } catch (error) {\r\n            console.error('Upload error:', error);\r\n        }\r\n\r\n    } catch (error) {\r\n        console.error('Upload error:', error);\r\n    }\r\n}"],"mappings":"AAAA,OAAO,MAAMA,cAAc,GAAG,MAAAA,CAAOC,IAAI,EAAEC,aAAa,KAAK;EACzD,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;EAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEJ,IAAI,CAAC,CAAC,CAAC;;EAE/B,IAAI;IACA,MAAMK,QAAQ,GAAG,MAAMC,KAAK,CAAC,8CAA8C,EAAE;MACzEC,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACL,QAAQ,EAAE,kBAAkB;QAC5B,eAAe,EAAE;MACrB,CAAC;MACDC,IAAI,EAAEP;IACV,CAAC,CAAC;IAEF,MAAMQ,MAAM,GAAG,MAAML,QAAQ,CAACM,IAAI,CAAC,CAAC;IACpCC,OAAO,CAACC,GAAG,CAACH,MAAM,CAAC;IAEnB,MAAMI,QAAQ,GAAGJ,MAAM,CAACK,SAAS,CAAC,CAAC,CAAC,CAACC,KAAK,GAAG,GAAG,GAAGN,MAAM,CAACK,SAAS,CAAC,CAAC,CAAC,CAACE,EAAE,GAAG,OAAO;IACnF,IAAI;MACA,MAAMC,SAAS,GAAG,MAAMZ,KAAK,CAAC,yCAAyC,GAACL,aAAa,GAAC,oBAAoB,EAAE;QACxGM,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACL,QAAQ,EAAE,kBAAkB;UAC5B,eAAe,EAAE,wCAAwC;UACzD,cAAc,EAAE;QACpB,CAAC;QACDC,IAAI,EAAEU,IAAI,CAACC,SAAS,CAAC;UACjB,MAAM,EAAE,CAACN,QAAQ;QACrB,CAAC;MACL,CAAC,CAAC;MACF,MAAMO,OAAO,GAAG,MAAMH,SAAS,CAACP,IAAI,CAAC,CAAC;MACtCC,OAAO,CAACC,GAAG,CAACQ,OAAO,CAAC;IAExB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACZV,OAAO,CAACU,KAAK,CAAC,eAAe,EAAEA,KAAK,CAAC;IACzC;EAEJ,CAAC,CAAC,OAAOA,KAAK,EAAE;IACZV,OAAO,CAACU,KAAK,CAAC,eAAe,EAAEA,KAAK,CAAC;EACzC;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}